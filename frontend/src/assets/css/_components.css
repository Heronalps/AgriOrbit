@import '_primevue.css';
@import '_theme-dark.css';

/* Styles that remain in _components.css are for specific custom components */
/* or truly shared component patterns not covered by PrimeVue base or dark theme. */

/* Custom grey button style for dark widgets or neutral actions */
/* This ensures it works with the base p-button class from PrimeVue */
.p-button.p-button-custom-grey {
  background: var(--neutral-700); /* #4a5568 */
  color: var(--widget-text-color); /* #ffffff */
  border: 1px solid var(--neutral-700);
}

.p-button.p-button-custom-grey:enabled:hover,
.p-button.p-button-custom-grey:enabled:active {
  background: var(--neutral-500); /* #a0aec0 - Lighter grey for interaction */
  color: var(--widget-text-color);
  border-color: var(--neutral-500);
}

.p-button.p-button-custom-grey:enabled:focus {
  border-color: var(--neutral-500);
  /* neutral-500 is #a0aec0. RGB is 160, 174, 192 */
  box-shadow: 0 0 0 0.2rem rgba(160, 174, 192, 0.25);
}

.p-button.p-button-custom-grey:disabled {
  background: var(
    --neutral-800
  ); /* #2d3748 - Darker, muted grey for disabled state */
  color: var(--neutral-500); /* #a0aec0 - Muted text for disabled state */
  border-color: var(--neutral-800);
}

/* Styling for PDropdown within widget-dark-theme */
.widget-dark-theme .p-dropdown {
  background: var(--neutral-700);
  color: var(--widget-text-color);
  border: 1px solid var(--neutral-700);
}
.widget-dark-theme .p-dropdown .p-dropdown-label {
  color: var(--widget-text-color);
}
.widget-dark-theme .p-dropdown .p-dropdown-label.p-placeholder {
  color: rgba(
    255,
    255,
    255,
    0.5
  ); /* Consistent with --input-placeholder-color */
}
.widget-dark-theme .p-dropdown .p-dropdown-trigger .p-icon {
  color: var(--widget-text-color);
}
.widget-dark-theme .p-dropdown:not(.p-disabled):hover {
  background: var(--neutral-500);
  border-color: var(--neutral-500);
}
.widget-dark-theme .p-dropdown:not(.p-disabled).p-focus {
  border-color: var(--neutral-500);
  box-shadow: 0 0 0 0.2rem var(--neutral-300);
}
.widget-dark-theme .p-dropdown.p-disabled {
  background: var(--neutral-800);
  color: var(--neutral-500);
  border-color: var(--neutral-800);
}
.widget-dark-theme .p-dropdown.p-disabled .p-dropdown-label,
.widget-dark-theme .p-dropdown.p-disabled .p-dropdown-trigger .p-icon {
  color: var(--neutral-500);
}

/* Styling for PCalendar within widget-dark-theme */
.widget-dark-theme .p-calendar .p-inputtext {
  background: var(--neutral-700);
  color: var(--widget-text-color);
  border: 1px solid var(--neutral-700);
}
.widget-dark-theme .p-calendar .p-inputtext::placeholder {
  color: rgba(
    255,
    255,
    255,
    0.5
  ); /* Consistent with --input-placeholder-color */
}
.widget-dark-theme .p-calendar .p-inputtext:enabled:hover {
  border-color: var(--neutral-500);
}
.widget-dark-theme .p-calendar .p-inputtext:enabled:focus {
  border-color: var(--neutral-500);
  box-shadow: 0 0 0 0.2rem var(--neutral-300);
}
.widget-dark-theme .p-calendar .p-datepicker-trigger {
  background: var(--neutral-700);
  color: var(--widget-text-color);
  border: 1px solid var(--neutral-700);
  border-left: 1px solid var(--neutral-800); /* Slightly darker separator */
}
.widget-dark-theme .p-calendar .p-datepicker-trigger .p-icon {
  color: var(--widget-text-color);
}
.widget-dark-theme .p-calendar .p-datepicker-trigger:enabled:hover {
  background: var(--neutral-500);
  color: var(--widget-text-color);
  border-color: var(--neutral-500);
}
.widget-dark-theme .p-calendar .p-datepicker-trigger:enabled:active {
  background: var(--neutral-500);
  color: var(--widget-text-color);
  border-color: var(--neutral-500);
}
.widget-dark-theme .p-calendar.p-calendar-disabled .p-inputtext,
.widget-dark-theme .p-calendar.p-calendar-disabled .p-datepicker-trigger {
  background: var(--neutral-800);
  color: var(--neutral-500);
  border-color: var(--neutral-800);
}
.widget-dark-theme
  .p-calendar.p-calendar-disabled
  .p-datepicker-trigger
  .p-icon {
  color: var(--neutral-500);
}

/* Ensure dropdown panels also match the dark theme */
.p-dropdown-panel.widget-dark-theme-panel, /* Add a class to panel if possible, or rely on general .p-dropdown-panel if not */
.p-datepicker-panel.widget-dark-theme-panel {
  background-color: var(--neutral-800); /* Darker background for panels */
  border: 1px solid var(--neutral-700);
}
.p-dropdown-panel.widget-dark-theme-panel .p-dropdown-item,
.p-datepicker-panel.widget-dark-theme-panel .p-datepicker-header,
.p-datepicker-panel.widget-dark-theme-panel .p-datepicker-calendar td span {
  color: var(--widget-text-color);
}
.p-dropdown-panel.widget-dark-theme-panel .p-dropdown-item:hover,
.p-datepicker-panel.widget-dark-theme-panel
  .p-datepicker-calendar
  td:not(.p-datepicker-other-month)
  span:hover {
  background-color: var(--neutral-700);
}
.p-dropdown-panel.widget-dark-theme-panel .p-dropdown-item.p-highlight {
  background-color: var(--primary-color);
  color: var(--primary-color-text);
}
.p-datepicker-panel.widget-dark-theme-panel
  .p-datepicker-header
  .p-datepicker-title,
.p-datepicker-panel.widget-dark-theme-panel
  .p-datepicker-header
  .p-datepicker-prev,
.p-datepicker-panel.widget-dark-theme-panel
  .p-datepicker-header
  .p-datepicker-next {
  color: var(--widget-text-color);
}
.p-datepicker-panel.widget-dark-theme-panel
  .p-datepicker-header
  .p-datepicker-prev:hover,
.p-datepicker-panel.widget-dark-theme-panel
  .p-datepicker-header
  .p-datepicker-next:hover {
  background-color: var(--neutral-700);
}
.p-datepicker-panel.widget-dark-theme-panel .p-datepicker-calendar th {
  color: var(--text-color-secondary); /* Lighter grey for day names */
}
.p-datepicker-panel.widget-dark-theme-panel
  .p-datepicker-calendar
  td.p-datepicker-today
  span {
  background-color: var(--neutral-500); /* Highlight for today */
  color: var(--widget-text-color);
}
.p-datepicker-panel.widget-dark-theme-panel
  .p-datepicker-calendar
  td.p-highlight
  span {
  background-color: var(--primary-color); /* Highlight for selected date */
  color: var(--primary-color-text);
}

/* Custom grey style for input fields within dark widgets */
.widget-dark-theme .custom-grey-input-text {
  background-color: var(--neutral-700);
  color: var(--widget-text-color);
  border: 1px solid var(--neutral-700); /* Match background for seamless look */
}

.widget-dark-theme .custom-grey-input-text::placeholder {
  color: var(--neutral-400); /* Lighter grey for placeholder text */
}

.widget-dark-theme .custom-grey-input-text:enabled:focus {
  border-color: var(--neutral-500); /* Lighter grey for focus */
  /* neutral-500 is #a0aec0. RGB is 160, 174, 192 */
  box-shadow: 0 0 0 0.2rem rgba(160, 174, 192, 0.25);
}

.widget-dark-theme .custom-grey-input-text:disabled {
  background-color: var(--neutral-800);
  color: var(--neutral-500);
  border-color: var(--neutral-800);
}

/* Styling for PCalendar's popup panel to match the dark theme */
.p-datepicker.custom-grey-panel {
  background-color: var(--neutral-800) !important;
  border: 1px solid var(--neutral-700) !important;
}

/* Styles for Datepicker Header */
.p-datepicker.custom-grey-panel .p-datepicker-header {
  background-color: var(--neutral-700) !important; /* Header background */
  color: var(
    --widget-text-color
  ) !important; /* Default text color for anything not specifically styled */
  border-bottom: 1px solid var(--neutral-500) !important; /* Darker border for separation */
  padding: 0.5rem !important;
}

/* Month and Year text elements within the title */
.p-datepicker.custom-grey-panel .p-datepicker-header .p-datepicker-title .p-datepicker-month,
.p-datepicker.custom-grey-panel .p-datepicker-header .p-datepicker-title .p-datepicker-year,
.p-datepicker.custom-grey-panel .p-datepicker-header .p-datepicker-title span, /* Fallback for non-specific spans */
.p-datepicker.custom-grey-panel .p-datepicker-header .p-datepicker-title a {
  /* Fallback for non-specific links */
  color: var(--widget-text-color) !important; /* White text */
  background: none !important; /* Ensure no accidental background */
  text-decoration: none !important;
  font-weight: 600 !important; /* Make them slightly bolder */
  padding: 0.25rem 0.1rem !important;
}

/* Hover state for clickable Month and Year elements */
.p-datepicker.custom-grey-panel .p-datepicker-header .p-datepicker-title .p-datepicker-month:hover,
.p-datepicker.custom-grey-panel .p-datepicker-header .p-datepicker-title .p-datepicker-year:hover,
.p-datepicker.custom-grey-panel .p-datepicker-header .p-datepicker-title a:hover, /* Fallback for links */
.p-datepicker.custom-grey-panel .p-datepicker-header .p-datepicker-title button.p-link:hover {
  /* If they are buttons styled as links */
  color: var(--neutral-300) !important; /* Light grey text on hover */
  background: none !important;
  text-decoration: none !important;
}

/* Previous and Next month navigation arrows */
.p-datepicker.custom-grey-panel .p-datepicker-header .p-datepicker-prev,
.p-datepicker.custom-grey-panel .p-datepicker-header .p-datepicker-next {
  color: var(--widget-text-color) !important; /* White icon/text */
  background: none !important;
  border-radius: var(--border-radius-sm) !important;
  width: 2rem !important; /* Ensure decent clickable area */
  height: 2rem !important;
  display: inline-flex !important;
  justify-content: center !important;
  align-items: center !important;
  margin: 0 0.1rem !important;
}

/* Hover state for Previous and Next month navigation arrows */
.p-datepicker.custom-grey-panel
  .p-datepicker-header
  .p-datepicker-prev:enabled:hover,
.p-datepicker.custom-grey-panel
  .p-datepicker-header
  .p-datepicker-next:enabled:hover {
  color: var(--widget-text-color) !important; /* White icon/text */
  background-color: var(
    --neutral-500
  ) !important; /* Lighter grey background on hover */
}

/* Focus state for Previous and Next month navigation arrows (accessibility) */
.p-datepicker.custom-grey-panel
  .p-datepicker-header
  .p-datepicker-prev:enabled:focus,
.p-datepicker.custom-grey-panel
  .p-datepicker-header
  .p-datepicker-next:enabled:focus {
  box-shadow: 0 0 0 0.2rem var(--neutral-400) !important; /* Focus ring */
  outline: none !important;
  background-color: var(--neutral-500) !important; /* Consistent with hover */
}
/* END OF NEW HEADER STYLES - Original table styles follow */

.p-datepicker.custom-grey-panel table th {
  /* Day names header */
  color: var(--neutral-300) !important;
}
.p-datepicker.custom-grey-panel table td {
  /* Cell containing the date */
  padding: 0.1rem !important;
}
.p-datepicker.custom-grey-panel table td > span {
  /* Date numbers */
  color: var(--widget-text-color) !important;
  border-radius: var(--border-radius-sm) !important;
}
.p-datepicker.custom-grey-panel table td > span:focus {
  /* neutral-500 is #a0aec0. RGB is 160, 174, 192 */
  box-shadow: 0 0 0 0.2rem rgba(160, 174, 192, 0.25) !important;
}
.p-datepicker.custom-grey-panel table td.p-datepicker-today > span {
  background-color: var(--neutral-600) !important;
  color: var(--widget-text-color) !important;
}
.p-datepicker.custom-grey-panel
  table
  td:not(.p-datepicker-other-month):not(.p-disabled)
  > span:hover {
  background-color: var(--neutral-500) !important;
}
.p-datepicker.custom-grey-panel table td .p-highlight {
  /* Selected date */
  background-color: var(--primary-color) !important;
  color: var(--primary-color-text) !important;
}
.p-datepicker.custom-grey-panel .p-datepicker-buttonbar .p-button {
  background: var(--neutral-600) !important;
  color: var(--widget-text-color) !important;
  border: 1px solid var(--neutral-500) !important;
  justify-content: center;
}
.p-datepicker.custom-grey-panel
  .p-datepicker-buttonbar
  .p-button:enabled:hover {
  background: var(--neutral-500) !important;
}
.p-datepicker.custom-grey-panel .p-timepicker button {
  color: var(--widget-text-color) !important;
}
.p-datepicker.custom-grey-panel .p-timepicker button:enabled:hover {
  background-color: var(--neutral-600) !important;
  color: var(--widget-text-color) !important;
}

/* Map-specific component styling */
.ag-map-component .p-card {
  background-color: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(5px);
}

/* ChatWidget.vue specific styles (Many of these will be moved to ChatWidget.vue <style scoped>) */
.chat-widget {
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.chat-header {
  /* This is a general class, but also themed by .widget-dark-theme .chat-header */
  padding: 10px;
  text-align: center;
  position: relative;
  cursor: move; /* Indicate draggable */
  user-select: none; /* Prevent text selection while dragging */
}

.widget-dark-theme .chat-header {
  /* Specific to dark theme chat header */
  background-color: var(--primary-color);
  color: var(--primary-color-text);
  /* padding: 10px; already in .chat-header */
  /* text-align: center; already in .chat-header */
  /* position: relative; already in .chat-header */
  /* cursor: move; already in .chat-header */
  /* user-select: none; already in .chat-header */
  border-top-left-radius: var(--border-radius);
  border-top-right-radius: var(--border-radius);
  border-bottom: 1px solid var(--primary-dark);
}

.chat-header h2 {
  /* Styling for h2 specifically within a .chat-header context */
  margin: 0;
  font-size: 1.5em;
  font-weight: 700;
  font-family: 'Montserrat', sans-serif;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.farm-setup-container {
  padding: 20px;
  text-align: center;
  display: flex;
  flex-direction: column;
  justify-content: center;
  overflow-y: auto;
  flex-shrink: 0;
}

.chat-body {
  flex: 1 1 auto;
  overflow-y: auto;
  padding: 10px;
}

.chat-footer {
  border-top: 1px solid var(--surface-d);
  flex-shrink: 0;
  padding: 10px;
}

.message {
  margin: 5px 0;
}

.chat-input {
  display: flex;
  border-top: 1px solid var(--surface-d);
  align-items: center;
  gap: 10px;
}

/* Styling for sent messages within .widget-dark-theme */
.widget-dark-theme .sent .message-bubble {
  background: var(--primary-dark);
  color: var(--primary-color-text);
  margin-left: auto;
}

/* Styling for received messages within .widget-dark-theme */
.widget-dark-theme .received .message-bubble {
  background: var(--neutral-700);
  color: var(--widget-text-color);
  max-height: none;
  overflow-y: visible;
}

/* Markdown styling within received messages in .widget-dark-theme */
.widget-dark-theme .received .message-bubble p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
  white-space: normal;
}

.widget-dark-theme .received .message-bubble ul,
.widget-dark-theme .received .message-bubble ol {
  padding-left: 1.5em;
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

.widget-dark-theme .received .message-bubble li {
  margin-bottom: 0.25em;
}

.widget-dark-theme .received .message-bubble strong,
.widget-dark-theme .received .message-bubble b {
  font-weight: bold;
}

.widget-dark-theme .received .message-bubble em,
.widget-dark-theme .received .message-bubble i {
  font-style: italic;
}

.widget-dark-theme .received .message-bubble code {
  background-color: rgba(var(--surface-d-rgb), 0.1);
  padding: 0.2em 0.4em;
  border-radius: var(--border-radius-sm);
  font-family: var(--font-family-monospace);
}

.widget-dark-theme .received .message-bubble pre {
  background-color: rgba(var(--surface-d-rgb), 0.1);
  padding: 0.5em;
  border-radius: var(--border-radius-sm);
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.widget-dark-theme .received .message-bubble pre code {
  padding: 0;
  background-color: transparent;
  white-space: pre-wrap;
}

.widget-dark-theme .received .message-bubble a {
  color: var(--link-color);
  text-decoration: underline;
}

.widget-dark-theme .received .message-bubble a:hover {
  color: var(--link-hover-color);
}

.suggestions {
  display: flex;
  flex-wrap: wrap;
  padding: 5px;
  gap: 5px;
}
